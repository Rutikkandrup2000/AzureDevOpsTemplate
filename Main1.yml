# variables:
# - name: foo
#   value: $(Build)
# - name: fooo
#   value: $(sonarQubeRunAnalysis)
# - name: doc
#   value: $(Docker)
# parameters:
#   Build: 'Java'
#   sonarQubeRunAnalysis: true
#   Docker: true
# - name: Build
#   type: string
# - name: sonarQubeRunAnalysis
#   type: string
# - name: Docker
#   type: string
steps:
- task: CmdLine@2
  displayName: Display Variable
  inputs:
    script: |
      echo "$Build1-$(Build)"
      SonarAnalysis=$(sonarQubeRunAnalysis)
      echo $SonarAnalysis
      DockerContainer=$(Docker)
      echo $DockerContainer
- script: |
    echo "##vso[task.setvariable variable=RunSonarAnalysis;isOutput=true]$(sonarQubeRunAnalysis)"
  name: sonarAnalysisOutput
- script: |
    echo "##vso[task.setvariable variable=DockerContainer;isOutput=true]$(Docker)"
  name: dockerOutput
- ${{ if eq(variables['Build1'], 'Java') }}:
  - ${{ if eq(variables['sonarAnalysisOutput.RunSonarAnalysis'], 'true') }}:
    - template: sonarcloudprepare.yml
  - template: MavenBuild.yml
  - ${{ if eq(variables['sonarAnalysisOutput.RunSonarAnalysis'], 'true') }}:
    - template: SonarCloud.yml
  - ${{ if eq(variables['dockerOutput.DockerContainer'], 'true') }}:
    - template: Docker.yml
  - template: PublishArtifact.yml
# - ${{ if eq(variables['BuildMavenOutput.BuildMaven'], 'dotnet') }}:
#   - template: dotnetTemplate.yml